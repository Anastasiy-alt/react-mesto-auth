{"ast":null,"code":"import _slicedToArray from\"/Users/anastasiavolokitina/Documents/GitHub/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{CurrentUserContext}from'../context/CurrentUserContext';import Header from'./Header';import Footer from'./Footer';import Main from'./Main';import api from'../utils/Api';import PopupWithForm from'./PopupWithForm';import ImagePopup from'./ImagePopup';import'../index.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];var handleUserInfo=function handleUserInfo(userInfo){setCurrentUser(userInfo);};useEffect(function(){api.getUserInfo().then(function(userData){setCurrentUser(userData);}).catch(function(error){console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(error));});});function handleCardLike(card){// Снова проверяем, есть ли уже лайк на этой карточке\nvar isLiked=card.likes.some(function(i){return i._id===currentUser._id;});// Отправляем запрос в API и получаем обновлённые данные карточки\napi.changeLikeCardStatus(card._id,!isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});});}var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),cards=_useState4[0],setCards=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isEditProfilePopupOpen=_useState6[0],setIsEditProfilePopupOpen=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isAddPlacePopupOpen=_useState8[0],setIsAddPlacePopupOpen=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isEditAvatarPopupOpen=_useState10[0],setIsEditAvatarPopupOpen=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),selectedCard=_useState12[0],setSelectedCard=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isDeletePopupOpen=_useState14[0],setIsDeletePopupOpen=_useState14[1];var handleEditProfileClick=function handleEditProfileClick(){setIsEditProfilePopupOpen(true);};var handleAddPlaceClick=function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);};var handleEditAvatarClick=function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);};var handleCardClick=function handleCardClick(card){setSelectedCard(card);};var handleDeletePopupClick=function handleDeletePopupClick(){setIsDeletePopupOpen(true);};var closeAllPopups=function closeAllPopups(){setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setIsEditAvatarPopupOpen(false);setIsDeletePopupOpen(false);setSelectedCard({});};return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onEditAvatar:handleEditAvatarClick,onCardClick:handleCardClick,onDeleteClick:handleDeletePopupClick,onUserInfo:handleUserInfo,handleCardLike:handleCardLike}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsxs(PopupWithForm,{name:\"edit\",title:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,children:[/*#__PURE__*/_jsxs(\"label\",{className:\"popup__label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"popup__item popup__item_input_name\",name:\"name\",maxLength:\"40\",minLength:\"2\",required:true,id:\"name\",placeholder:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error name-error\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"popup__label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"popup__item popup__item_input_info\",name:\"info\",maxLength:\"200\",minLength:\"2\",required:true,id:\"info\",placeholder:\"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error info-error\"})]})]}),/*#__PURE__*/_jsxs(PopupWithForm,{name:\"add\",title:\"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u043C\\u0435\\u0441\\u0442\\u043E\",button:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C\",isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,children:[/*#__PURE__*/_jsxs(\"label\",{className:\"popup__label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"popup__item popup__item_input_name\",name:\"name\",maxLength:\"40\",minLength:\"2\",required:true,id:\"name\",placeholder:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error name-error\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"popup__label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"popup__item popup__item_input_info\",name:\"info\",maxLength:\"200\",minLength:\"2\",required:true,id:\"info\",placeholder:\"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error info-error\"})]})]}),/*#__PURE__*/_jsx(PopupWithForm,{name:\"delete\",title:\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\",button:\"\\u0414\\u0430\",onClose:closeAllPopups,isOpen:isDeletePopupOpen,popupDelete:true}),/*#__PURE__*/_jsx(PopupWithForm,{name:\"avatar\",title:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,popupAvatar:true,children:/*#__PURE__*/_jsxs(\"label\",{className:\"popup__label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"url\",className:\"popup__item popup__item_input_link-avatar\",name:\"avatar\",placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",required:true,id:\"avatar\"}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error avatar-error\"})]})}),/*#__PURE__*/_jsx(ImagePopup,{onClose:closeAllPopups,card:selectedCard})]})});}export default App;","map":{"version":3,"names":["useState","useEffect","CurrentUserContext","Header","Footer","Main","api","PopupWithForm","ImagePopup","App","currentUser","setCurrentUser","handleUserInfo","userInfo","getUserInfo","then","userData","catch","error","console","log","handleCardLike","card","isLiked","likes","some","i","_id","changeLikeCardStatus","newCard","setCards","state","map","c","cards","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","isDeletePopupOpen","setIsDeletePopupOpen","handleEditProfileClick","handleAddPlaceClick","handleEditAvatarClick","handleCardClick","handleDeletePopupClick","closeAllPopups"],"sources":["/Users/anastasiavolokitina/Documents/GitHub/mesto-react/src/components/App.js"],"sourcesContent":["import {useState, useEffect} from 'react';\nimport { CurrentUserContext } from '../context/CurrentUserContext';\nimport Header from './Header';\nimport Footer from './Footer';\nimport Main from './Main';\nimport api from '../utils/Api';\nimport PopupWithForm from './PopupWithForm';\nimport ImagePopup from './ImagePopup';\nimport '../index.css';\n\n\nfunction App() {\n\n    const [currentUser, setCurrentUser] = useState({});\n\n    const handleUserInfo = (userInfo) => {\n        setCurrentUser(userInfo);\n    }\n\n    useEffect(() => {\n        api.getUserInfo()\n            .then((userData) => {\n                setCurrentUser(userData);\n            })\n            .catch((error) => {\n                console.log(`Ошибка: ${error}`);\n            })\n    })\n\n    function handleCardLike(card) {\n        // Снова проверяем, есть ли уже лайк на этой карточке\n        const isLiked = card.likes.some(i => i._id === currentUser._id);\n        \n        // Отправляем запрос в API и получаем обновлённые данные карточки\n        api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\n            setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n        });\n    }\n\n    const [cards, setCards] = useState([]);\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n    const [selectedCard, setSelectedCard] = useState({});\n    const [isDeletePopupOpen, setIsDeletePopupOpen] = useState(false);\n\n    const handleEditProfileClick = () => {\n        setIsEditProfilePopupOpen(true);\n    }\n    const handleAddPlaceClick = () => {\n        setIsAddPlacePopupOpen(true);\n    }\n    const handleEditAvatarClick = () => {\n        setIsEditAvatarPopupOpen(true);\n    }\n    const handleCardClick = (card) => {\n        setSelectedCard(card);\n    }\n    const handleDeletePopupClick = () => {\n        setIsDeletePopupOpen(true);\n    }\n    const closeAllPopups = () => {\n        setIsEditProfilePopupOpen(false);\n        setIsAddPlacePopupOpen(false);\n        setIsEditAvatarPopupOpen(false);\n        setIsDeletePopupOpen(false);\n        setSelectedCard({});\n    }\n\n    return (\n        <CurrentUserContext.Provider value={currentUser}>\n            <div className=\"page\">\n\n                <Header />\n                <Main onEditProfile={handleEditProfileClick}\n                    onAddPlace={handleAddPlaceClick}\n                    onEditAvatar={handleEditAvatarClick}\n                    onCardClick={handleCardClick}\n                    onDeleteClick={handleDeletePopupClick}\n                    onUserInfo={handleUserInfo} \n                    handleCardLike={handleCardLike}/>\n                <Footer />\n\n                <PopupWithForm name=\"edit\" title=\"Редактировать профиль\" isOpen={isEditProfilePopupOpen} onClose={closeAllPopups}>\n                    <label className=\"popup__label\">\n                        <input type=\"text\" className=\"popup__item popup__item_input_name\" name=\"name\" maxLength=\"40\"\n                            minLength=\"2\" required id=\"name\" placeholder=\"Имя\" />\n                        <span className=\"popup__input-error name-error\"></span>\n                    </label>\n                    <label className=\"popup__label\">\n                        <input type=\"text\" className=\"popup__item popup__item_input_info\" name=\"info\" maxLength=\"200\"\n                            minLength=\"2\" required id=\"info\" placeholder=\"Информация\" />\n                        <span className=\"popup__input-error info-error\"></span>\n                    </label>\n                </PopupWithForm>\n\n                <PopupWithForm name=\"add\" title=\"Новое место\" button=\"Создать\" isOpen={isAddPlacePopupOpen} onClose={closeAllPopups}>\n                    <label className=\"popup__label\">\n                        <input type=\"text\" className=\"popup__item popup__item_input_name\" name=\"name\" maxLength=\"40\"\n                            minLength=\"2\" required id=\"name\" placeholder=\"Имя\" />\n                        <span className=\"popup__input-error name-error\"></span>\n                    </label>\n                    <label className=\"popup__label\">\n                        <input type=\"text\" className=\"popup__item popup__item_input_info\" name=\"info\" maxLength=\"200\"\n                            minLength=\"2\" required id=\"info\" placeholder=\"Информация\" />\n                        <span className=\"popup__input-error info-error\"></span>\n                    </label>\n                </PopupWithForm>\n\n                <PopupWithForm name=\"delete\" title=\"Вы уверены?\" button=\"Да\" onClose={closeAllPopups} isOpen={isDeletePopupOpen} popupDelete={true} />\n\n                <PopupWithForm name=\"avatar\" title=\"Обновить аватар\" isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} popupAvatar={true}>\n                    <label className=\"popup__label\">\n                        <input type=\"url\" className=\"popup__item popup__item_input_link-avatar\" name=\"avatar\"\n                            placeholder=\"Ссылка на аватар\" required id=\"avatar\" />\n                        <span className=\"popup__input-error avatar-error\"></span>\n                    </label>\n                </PopupWithForm>\n\n                <ImagePopup onClose={closeAllPopups} card={selectedCard} />\n\n            </div>\n        </CurrentUserContext.Provider>\n    );\n}\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}